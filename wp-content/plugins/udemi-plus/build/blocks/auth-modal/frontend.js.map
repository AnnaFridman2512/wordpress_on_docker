{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":";;;;;AAAAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,MAAI;EAC9C,MAAMC,YAAY,GAAGF,QAAQ,CAACG,gBAAT,CAA0B,aAA1B,CAArB;EACA,MAAMC,OAAO,GAAGJ,QAAQ,CAACK,aAAT,CACZ,iCADY,CAAhB;EAII,MAAMC,YAAY,GAAGN,QAAQ,CAACG,gBAAT,CACjB,kCADiB,CAArB;EAIJD,YAAY,CAACK,OAAb,CAAqBC,EAAE,IAAG;IACtBA,EAAE,CAACP,gBAAH,CAAoB,OAApB,EAA6BQ,KAAK,IAAI;MAClCA,KAAK,CAACC,cAAN;MAEAN,OAAO,CAACO,SAAR,CAAkBC,GAAlB,CAAsB,YAAtB;IACH,CAJD;EAKH,CAND;EAQAN,YAAY,CAACC,OAAb,CAAqBC,EAAE,IAAI;IACvBA,EAAE,CAACP,gBAAH,CAAoB,OAApB,EAA6BQ,KAAK,IAAI;MAClCA,KAAK,CAACC,cAAN;MAEAN,OAAO,CAACO,SAAR,CAAkBE,MAAlB,CAAyB,YAAzB;IACH,CAJD;EAKH,CAND;EAQA,MAAMC,IAAI,GAAGd,QAAQ,CAACG,gBAAT,CAA0B,SAA1B,CAAb;EACA,MAAMY,UAAU,GAAGf,QAAQ,CAACK,aAAT,CAAuB,aAAvB,CAAnB;EACA,MAAMW,UAAU,GAAGhB,QAAQ,CAACK,aAAT,CAAuB,aAAvB,CAAnB;EAGAS,IAAI,CAACP,OAAL,CAAaU,GAAG,IAAI;IAChBA,GAAG,CAAChB,gBAAJ,CAAqB,OAArB,EAA8BQ,KAAK,IAAI;MACnCA,KAAK,CAACC,cAAN;MAEJO,GAAG,CAACV,OAAJ,CAAYW,UAAU,IAAI;QACtBA,UAAU,CAACP,SAAX,CAAqBE,MAArB,CAA4B,YAA5B;MACH,CAFD;MAIAJ,KAAK,CAACU,aAAN,CAAoBR,SAApB,CAA8BC,GAA9B,CAAkC,QAAlC;MAEA,MAAMQ,SAAS,GAAKX,KAAK,CAACU,aAAN,CAAoBE,YAApB,CAAiC,MAAjC,CAApB;;MAGA,IAAGD,SAAS,KAAK,aAAjB,EAA+B;QAE3BL,UAAU,CAACO,sBAAX,CAAkCC,OAAlC,GAA4C,OAA5C;QACAP,UAAU,CAACM,sBAAX,CAAkCC,OAAlC,GAA4C,MAA5C;QACAP,UAAU,CAACf,gBAAX,CAA4B,QAA5B,EAAsC,MAAMQ,KAAN,IAAe;UACjDA,KAAK,CAACC,cAAN;UAEA,MAAMc,aAAa,GAAGT,UAAU,CAACV,aAAX,CAAyB,UAAzB,CAAtB;UACAmB,aAAa,CAACC,YAAd,CAA2B,WAA3B,EAAwC,IAAxC;UAEA,MAAMC,YAAY,GAAGX,UAAU,CAACV,aAAX,CAAyB,gBAAzB,CAArB;UACAqB,YAAY,CAACC,SAAb,GAA0B;AAC1C;AACA;AACA;AACA;AACA,iBALgB;UAOA,MAAMC,QAAQ,GAAG;YACbC,QAAQ,EAAEb,UAAU,CAACX,aAAX,CAAyB,UAAzB,EAAqCyB,KADlC;YAEbC,KAAK,EAAEf,UAAU,CAACX,aAAX,CAAyB,WAAzB,EAAsCyB,KAFhC;YAGbE,QAAQ,EAAEhB,UAAU,CAACX,aAAX,CAAyB,cAAzB,EAAyCyB;UAHtC,CAAjB;UAOA,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACC,YAAY,CAACC,MAAd,EAAsB;YAC9CC,MAAM,EAAE,MADsC;YAE9CC,OAAO,EAAE;cACL,gBAAgB;YADX,CAFqC;YAK9CC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeb,QAAf;UALwC,CAAtB,CAA5B;UAQA,MAAMc,YAAY,GAAG,MAAMT,QAAQ,CAACU,IAAT,EAA3B;;UAEA,IAAGD,YAAY,CAACE,MAAb,KAAuB,CAA1B,EAA4B;YACxBlB,YAAY,CAACC,SAAb,GAA0B;AAC9C;AACA;AACA;AACA,qBAJoB;YAMAkB,QAAQ,CAACC,MAAT;UACH,CARD,MAQK;YACDC,cAAc,CAACC,eAAf,CAA+B,UAA/B;YACAtB,YAAY,CAACC,SAAb,GAAyB;AAC7C;AACA;AACA;AACA,qBAJoB;UAKH;QAIJ,CAlDD;MAmDH;IAEA,CArED;EAsEH,CAvED;EAyEAZ,UAAU,CAACd,gBAAX,CAA4B,QAA5B,EAAsC,MAAMQ,KAAN,IAAc;IAChDA,KAAK,CAACC,cAAN;IAEA,MAAMuC,cAAc,GAAGlC,UAAU,CAACV,aAAX,CAAyB,UAAzB,CAAvB;IACA,MAAM6C,YAAY,GAAGnC,UAAU,CAACV,aAAX,CAAyB,gBAAzB,CAArB;IAEA4C,cAAc,CAACxB,YAAf,CAA4B,UAA5B,EAAwC,IAAxC;IACAyB,YAAY,CAACvB,SAAb,GAA0B;AAClC;AACA;AACA;AACA,aAJQ;IAOA,MAAMC,QAAQ,GAAG;MACbuB,UAAU,EAAEpC,UAAU,CAACV,aAAX,CAAyB,WAAzB,EAAsCyB,KADrC;MAEbE,QAAQ,EAAEjB,UAAU,CAACV,aAAX,CAAyB,cAAzB,EAAyCyB;IAFtC,CAAjB;IAKA,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACC,YAAY,CAACiB,MAAd,EAAqB;MAC7Cf,MAAM,EAAE,MADqC;MAE7CC,OAAO,EAAE;QACL,gBAAgB;MADX,CAFoC;MAM7CC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeb,QAAf;IANuC,CAArB,CAA5B;IASA,MAAMc,YAAY,GAAG,MAAMT,QAAQ,CAACU,IAAT,EAA3B;;IAEA,IAAGD,YAAY,CAACE,MAAb,KAAwB,CAA3B,EAA6B;MACzB7B,UAAU,CAAC6B,MAAX,GAAqB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,aAPY;MAQAC,QAAQ,CAACC,MAAT;IAEH,CAXD,MAWK;MACDG,cAAc,CAACD,eAAf,CAA+B,UAA/B;MACAE,YAAY,CAACvB,SAAb,GAA0B;AACtC;AACA;AACA;AACA,aAJY;IAKH;EACJ,CAjDD;AAkDH,CA1JD,E","sources":["webpack://udemi-plus/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', ()=>{\r\n    const openModalBtn = document.querySelectorAll('.open-modal')\r\n    const modalEl = document.querySelector(\r\n        '.wp-block-udemy-plus-auth-modal'\r\n        )\r\n\r\n        const modalCloseEl = document.querySelectorAll(\r\n            '.modal-overlay, .modal-btn-close'\r\n        )\r\n\r\n    openModalBtn.forEach(el =>{\r\n        el.addEventListener('click', event => {\r\n            event.preventDefault()\r\n\r\n            modalEl.classList.add('modal-show')\r\n        })\r\n    })\r\n\r\n    modalCloseEl.forEach(el => {\r\n        el.addEventListener('click', event => {\r\n            event.preventDefault()\r\n\r\n            modalEl.classList.remove('modal-show')\r\n        })\r\n    })\r\n\r\n    const tabs = document.querySelectorAll('.tabs a')\r\n    const signinForm = document.querySelector('#signin-tab')\r\n    const signupForm = document.querySelector('#signup-tab')\r\n\r\n\r\n    tabs.forEach(tab => {\r\n        tab.addEventListener('click', event => {\r\n            event.preventDefault()\r\n\r\n        tab.forEach(currentTab => {\r\n            currentTab.classList.remove('active-tab')\r\n        })    \r\n\r\n        event.currentTarget.classList.add('active')\r\n\r\n        const activeTab   = event.currentTarget.getAttribute('href')\r\n        \r\n\r\n        if(activeTab === '#signin-tab'){\r\n\r\n            signinForm.getElementsByClassName.display = 'block'\r\n            signupForm.getElementsByClassName.display = 'none'\r\n            signupForm.addEventListener('submit', async event => {\r\n                event.preventDefault()\r\n\r\n                const sinupFieldset = signinForm.querySelector('fieldset')\r\n                sinupFieldset.setAttribute('diszabled', true)\r\n\r\n                const signupStatus = signinForm.querySelector('#signup-status')\r\n                signupStatus.innerHTML = `\r\n                    <div class = \"modal-status modal-status-info>\r\n                    please wait, we are creating your acount\r\n                    </div>\r\n\r\n                `\r\n\r\n                const formData = {\r\n                    username: signupForm.querySelector('#su-name').value,\r\n                    email: signupForm.querySelector('#su-email').value,\r\n                    password: signupForm.querySelector('#su-password').value\r\n\r\n                }\r\n\r\n                const response = await fetch(up_auth_rest.signup, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(formData)\r\n                });\r\n\r\n                const responseJSON = await response.json()\r\n\r\n                if(responseJSON.status ===2){\r\n                    signupStatus.innerHTML = `\r\n                    <div clss=\"modal-status modal-status-success\">\r\n                        Success! Your account has been crated.\r\n                    </div>\r\n                    `\r\n\r\n                    location.reload()\r\n                }else{\r\n                    signupFieldset.removeAttribute('disabled')\r\n                    signupStatus.innerHTML= `\r\n                    <div class=\"modal-status modal-status-danger\">\r\n                        Unable to create account! Please try again later.\r\n                    </div> \r\n                    `\r\n                }\r\n\r\n                \r\n                \r\n            })\r\n        }\r\n\r\n        })\r\n    })\r\n\r\n    signinForm.addEventListener('submit', async event =>{\r\n        event.preventDefault()\r\n\r\n        const signinFieldset = signinForm.querySelector('fieldset')\r\n        const signinStatus = signinForm.querySelector('#signin-status')\r\n\r\n        signinFieldset.setAttribute('disabled', true)\r\n        signinStatus.innerHTML = `\r\n            <div class=\"modal-status modal-status-info\">\r\n                Please wait! We are loggin you  in.\r\n            </div>    \r\n            `\r\n\r\n\r\n        const formData = {\r\n            user_login: signinForm.querySelector('#si-email').value,\r\n            password: signinForm.querySelector('#si-password').value\r\n        }   \r\n        \r\n        const response = await fetch(up_auth_rest.signin,{\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n\r\n            body: JSON.stringify(formData)\r\n        })\r\n\r\n        const responseJSON = await response.json()\r\n\r\n        if(responseJSON.status === 2){\r\n            signinForm.status = `\r\n            \r\n            <div class=\"modal-status modal-status-success\">\r\n\r\n            Success! You are now logged in\r\n\r\n            </div>\r\n            `\r\n            location.reload()\r\n\r\n        }else{\r\n            signinFieldset.removeAttribute('disabled')\r\n            signinStatus.innerHTML = `\r\n            <div class=\"modal-status modal-status-danger\">\r\n            Invalid credentials! Please try again later.\r\n            </div>\r\n            `\r\n        }\r\n    })\r\n})"],"names":["document","addEventListener","openModalBtn","querySelectorAll","modalEl","querySelector","modalCloseEl","forEach","el","event","preventDefault","classList","add","remove","tabs","signinForm","signupForm","tab","currentTab","currentTarget","activeTab","getAttribute","getElementsByClassName","display","sinupFieldset","setAttribute","signupStatus","innerHTML","formData","username","value","email","password","response","fetch","up_auth_rest","signup","method","headers","body","JSON","stringify","responseJSON","json","status","location","reload","signupFieldset","removeAttribute","signinFieldset","signinStatus","user_login","signin"],"sourceRoot":""}